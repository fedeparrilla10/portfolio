---
import { languages } from '../i18n/ui';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const menuItems = [
  {
    name: t('nav.home'),
    link: '#home',
  },
  {
    name: t('nav.work'),
    link: '#work-experience',
  },
  {
    name: t('nav.projects'),
    link: '#projects',
  },
  {
    name: t('nav.skills'),
    link: '#skills',
  },
  {
    name: t('nav.contact'),
    link: '#contact',
  },
];

const flags = [
  {
    id: 1,
    name: 'Espa√±ol',
    src: '/portfolio/spa.svg',
  },
  {
    id: 2,
    name: 'English',
    src: '/portfolio/eng.svg',
  },
];
---

<section class="pt-2">
  <nav class="flex items-center justify-between">
    <img
      src="/portfolio/fplogo.png"
      class="h-6 w-6 object-contain"
      alt="FedeParrilla Logo"
    />
    <div class="flex flex-row gap-8">
      <ul
        class="hidden md:flex flex-row items-center justify-center gap-8 md:gap-5 text-[1rem] font-mono uppercase text-cyan-100"
      >
        {
          menuItems.map((item) => (
            <li>
              <a href={item.link}>{item.name}</a>
            </li>
          ))
        }
        <li class="bg-cyan-100 text-gray-950 rounded-xl px-3 uppercase">
          <a
            href={lang === 'en'
              ? '/portfolio/FedeParrillaENG.pdf'
              : '/portfolio/FedeParrillaESP.pdf'}
            target="_blank"
          >
            {t('nav.cv')}
          </a>
        </li>
      </ul>

      <ul class="flex flex-row items-center justify-center gap-3">
        {
          Object.entries(languages).map(([lang, label]) => (
            <li>
              <a href={`/portfolio/${lang}`}>
                <img
                  src={
                    flags.find(
                      (flag) => flag.name.toLowerCase() === label.toLowerCase()
                    ).src
                  }
                  alt={lang}
                  class="h-8 w-6 object-contain"
                />
              </a>
            </li>
          ))
        }
      </ul>
    </div>
  </nav>
</section>
